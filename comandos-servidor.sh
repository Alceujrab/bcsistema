#!/bin/bash

# COMANDOS PARA EXECUTAR NO SERVIDOR APÃ“S UPLOAD
# ==============================================
# Execute estes comandos via SSH no seu servidor

echo "ðŸ”§ COMANDOS PARA EXECUTAR NO SERVIDOR"
echo "====================================="
echo ""

echo "ðŸ“‹ 1. PREPARAÃ‡ÃƒO INICIAL"
echo "------------------------"
echo "# Navegue para o diretÃ³rio do projeto"
echo "cd /home/usadosar/public_html/bc"
echo ""
echo "# FaÃ§a backup do sistema atual"
echo "cp -r . ../backup-bc-sistema-\$(date +%Y%m%d-%H%M%S)"
echo ""

echo "ðŸ“‹ 2. UPLOAD DOS ARQUIVOS"
echo "------------------------"
echo "# Descompacte os arquivos (apÃ³s upload via FTP)"
echo "tar -xzf deploy-bc-sistema.tar.gz"
echo ""
echo "# OU se usar rsync/scp:"
echo "# rsync -avz --delete ./deploy-ready/ usuario@servidor:/home/usadosar/public_html/bc/"
echo ""

echo "ðŸ“‹ 3. INSTALAR DEPENDÃŠNCIAS"
echo "---------------------------"
echo "# Instalar dependÃªncias do Composer"
echo "composer install --optimize-autoloader --no-dev"
echo ""
echo "# Se nÃ£o tiver composer globalmente:"
echo "# php composer.phar install --optimize-autoloader --no-dev"
echo ""

echo "ðŸ“‹ 4. CONFIGURAR AMBIENTE"
echo "------------------------"
echo "# Verificar se o .env existe (nÃ£o substituir!)"
echo "if [ ! -f .env ]; then"
echo "    cp .env.example .env"
echo "    echo 'Configure o .env com suas credenciais'"
echo "fi"
echo ""
echo "# Gerar chave da aplicaÃ§Ã£o (se necessÃ¡rio)"
echo "php artisan key:generate"
echo ""

echo "ðŸ“‹ 5. CONFIGURAR PERMISSÃ•ES"
echo "--------------------------"
echo "# Definir permissÃµes corretas"
echo "chmod -R 755 storage"
echo "chmod -R 755 bootstrap/cache"
echo "chown -R \$USER:www-data storage bootstrap/cache"
echo ""
echo "# Para servidores compartilhados:"
echo "# chmod -R 777 storage bootstrap/cache"
echo ""

echo "ðŸ“‹ 6. EXECUTAR MIGRAÃ‡Ã•ES"
echo "-----------------------"
echo "# Executar migraÃ§Ãµes (CUIDADO: fazer backup do banco antes!)"
echo "php artisan migrate --force"
echo ""
echo "# Se quiser restaurar o backup do banco:"
echo "# mysql -u usadosar_lara962 -p usadosar_lara962 < backup_banco.sql"
echo ""

echo "ðŸ“‹ 7. OTIMIZAR CACHE"
echo "-------------------"
echo "# Limpar caches antigos"
echo "php artisan config:clear"
echo "php artisan cache:clear"
echo "php artisan view:clear"
echo "php artisan route:clear"
echo ""
echo "# Gerar novos caches (produÃ§Ã£o)"
echo "php artisan config:cache"
echo "php artisan route:cache"
echo "php artisan view:cache"
echo ""

echo "ðŸ“‹ 8. VERIFICAÃ‡Ã•ES FINAIS"
echo "------------------------"
echo "# Testar se o sistema estÃ¡ funcionando"
echo "php artisan --version"
echo ""
echo "# Verificar conectividade com banco"
echo "php artisan migrate:status"
echo ""
echo "# Testar rota principal"
echo "curl -I http://seudominio.com/bc"
echo ""

echo "ðŸ“‹ 9. MONITORAMENTO"
echo "------------------"
echo "# Verificar logs em caso de erro"
echo "tail -f storage/logs/laravel.log"
echo ""
echo "# Verificar permissÃµes se houver erro"
echo "ls -la storage/ bootstrap/cache/"
echo ""

echo "ðŸŽ¯ DEPLOY FINALIZADO!"
echo "==================="
echo ""
echo "âœ… Acesse: http://seudominio.com/bc"
echo "âœ… Teste todas as funcionalidades"
echo "âœ… Verifique se os grÃ¡ficos estÃ£o carregando"
echo "âœ… Teste a responsividade no mobile"
echo ""
